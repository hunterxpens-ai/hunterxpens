<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Custom Pens - Personalized Writing Instruments</title>
  <style>
    /* (kept your original styles - compacted slightly) */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Tahoma, Geneva, Verdana, sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
    .hero-section{text-align:center;color:#fff;padding:40px 20px;max-width:1200px;margin:0 auto 30px}
    .hero-section h1{font-size:3.5em;margin-bottom:15px;text-shadow:2px 2px 4px rgba(0,0,0,.3);animation:fadeInDown .8s ease}
    .hero-section p{font-size:1.3em;text-shadow:1px 1px 2px rgba(0,0,0,.3);animation:fadeInUp .8s ease}
    @keyframes fadeInDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .pen-showcase{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;max-width:1200px;margin:0 auto 40px;padding:0 20px}
    .pen-card{background:#fff;border-radius:15px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.2);text-align:center;transition:transform .3s ease;animation:zoomIn .6s ease}
    .pen-card:hover{transform:translateY(-10px) scale(1.05)}
    @keyframes zoomIn{from{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}
    .pen-image{font-size:80px;margin-bottom:10px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.2))}
    .pen-card h3{color:#667eea;margin-bottom:5px}
    .pen-card p{color:#666;font-size:.9em}
    .container{background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-width:700px;width:100%;padding:40px;margin:0 auto;animation:fadeIn .5s ease-in}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .page{display:none}.page.active{display:block}
    h2{color:#667eea;margin-bottom:10px;font-size:2em}
    .subtitle{color:#666;margin-bottom:30px;font-size:.95em}
    .form-group{margin-bottom:30px}
    label.main-label{display:block;margin-bottom:8px;color:#333;font-weight:600;font-size:1.1em}
    input[type="text"],input[type="email"],input[type="tel"]{width:100%;padding:12px 15px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;transition:all .3s ease}
    input[type="text"]:focus,input[type="email"]:focus,input[type="tel"]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}
    .color-selector{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:15px;margin-top:15px}
    .color-option{text-align:center;cursor:pointer}
    .color-option input[type="radio"]{display:none}
    .color-box-wrapper{position:relative;padding-bottom:100%;border-radius:12px;overflow:hidden;transition:all .3s ease;border:3px solid #e0e0e0}
    .color-option:hover .color-box-wrapper{transform:scale(1.1);border-color:#667eea}
    .color-option input[type="radio"]:checked + .color-box-wrapper{border:4px solid #333;transform:scale(1.05);box-shadow:0 0 15px rgba(0,0,0,.3)}
    .color-box{position:absolute;top:0;left:0;width:100%;height:100%}
    .color-name{margin-top:8px;font-size:.9em;color:#333;font-weight:600}
    button.primary{width:100%;padding:18px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:12px;font-size:20px;font-weight:700;cursor:pointer;transition:all .3s ease;margin-top:20px;text-transform:uppercase;letter-spacing:1px}
    button.primary:hover{transform:translateY(-3px);box-shadow:0 15px 35px rgba(102,126,234,.5)}
    .payment-option{display:flex;align-items:center;padding:25px;border:3px solid #e0e0e0;border-radius:12px;margin-bottom:20px;cursor:pointer;transition:all .3s ease;background:#fff}
    .payment-option:hover{border-color:#667eea;background:#f8f9ff;transform:translateX(5px)}
    .payment-option input[type="radio"]{margin-right:20px;width:24px;height:24px;cursor:pointer;accent-color:#667eea}
    .payment-option.selected{border-color:#667eea;background:#f8f9ff;box-shadow:0 5px 15px rgba(102,126,234,.2)}
    .payment-label{font-size:1.3em;font-weight:700;color:#333}
    .success-icon{text-align:center;font-size:100px;margin-bottom:20px;animation:bounce 1s ease infinite}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
    .success-message{text-align:center;color:#666;line-height:1.8;font-size:1.1em}
    .order-summary{background:linear-gradient(135deg,#f8f9ff 0%,#e8ebff 100%);padding:25px;border-radius:15px;margin-bottom:30px;border:2px solid #667eea}
    .order-summary h3{color:#667eea;margin-bottom:20px;font-size:1.5em}
    .summary-item{display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:12px;border-bottom:2px solid rgba(102,126,234,.2)}
    .summary-item:last-child{border-bottom:none}
    .summary-label{color:#666;font-weight:600;font-size:1.05em}
    .summary-value{color:#333;font-weight:700;font-size:1.05em}
    .section-title{font-size:1.2em;color:#764ba2;font-weight:700;margin-bottom:15px;padding:10px;background:linear-gradient(135deg,#f8f9ff 0%,#e8ebff 100%);border-radius:8px;text-align:center}
    /* small helpers */
    .center{text-align:center}
    .muted{color:#666}
  </style>
</head>
<body>
  <div class="hero-section">
    <h1>‚úíÔ∏è Custom Pens</h1>
    <p>Design Your Perfect Personalized Writing Instrument</p>
  </div>

  <div class="pen-showcase">
    <div class="pen-card" style="animation-delay:.1s">
      <div class="pen-image">üñäÔ∏è</div><h3>Classic</h3><p>Elegant & Professional</p>
    </div>
    <div class="pen-card" style="animation-delay:.2s">
      <div class="pen-image">‚úíÔ∏è</div><h3>Premium</h3><p>Luxury Feel</p>
    </div>
    <div class="pen-card" style="animation-delay:.3s">
      <div class="pen-image">üñãÔ∏è</div><h3>Executive</h3><p>Business Style</p>
    </div>
    <div class="pen-card" style="animation-delay:.4s">
      <div class="pen-image">‚úçÔ∏è</div><h3>Custom</h3><p>Your Design</p>
    </div>
  </div>

  <div class="container">
    <!-- Page1: Order -->
    <div id="page1" class="page active">
      <h2>üé® Customize Your Pen</h2>
      <p class="subtitle">Make it uniquely yours!</p>

      <form id="orderFormLocal" onsubmit="return false;">
        <div class="form-group">
          <label class="main-label" for="customName">Custom Name on Pen *</label>
          <input type="text" id="customName" name="customName" required placeholder="Enter name to be printed">
        </div>

        <div class="form-group">
          <label class="main-label">Body Color *</label>
          <div class="section-title">Choose Your Body Color</div>
          <div class="color-selector">
            <!-- color options (kept same) -->
            <label class="color-option"><input type="radio" name="bodyColor" value="Red" required><div class="color-box-wrapper"><div class="color-box" style="background:#FF0000"></div></div><div class="color-name">Red</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Orange"><div class="color-box-wrapper"><div class="color-box" style="background:#FF7F00"></div></div><div class="color-name">Orange</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Yellow"><div class="color-box-wrapper"><div class="color-box" style="background:#FFFF00"></div></div><div class="color-name">Yellow</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Green"><div class="color-box-wrapper"><div class="color-box" style="background:#00FF00"></div></div><div class="color-name">Green</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Blue"><div class="color-box-wrapper"><div class="color-box" style="background:#0000FF"></div></div><div class="color-name">Blue</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Indigo"><div class="color-box-wrapper"><div class="color-box" style="background:#4B0082"></div></div><div class="color-name">Indigo</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Violet"><div class="color-box-wrapper"><div class="color-box" style="background:#9400D3"></div></div><div class="color-name">Violet</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Gold"><div class="color-box-wrapper"><div class="color-box" style="background:linear-gradient(135deg,#FFD700,#FFA500)"></div></div><div class="color-name">Gold</div></label>
            <label class="color-option"><input type="radio" name="bodyColor" value="Silver"><div class="color-box-wrapper"><div class="color-box" style="background:linear-gradient(135deg,#C0C0C0,#E8E8E8)"></div></div><div class="color-name">Silver</div></label>
          </div>
        </div>

        <div class="form-group">
          <label class="main-label">Grip Color *</label>
          <div class="section-title">Choose Your Grip Color</div>
          <div class="color-selector">
            <label class="color-option"><input type="radio" name="gripColor" value="Red" required><div class="color-box-wrapper"><div class="color-box" style="background:#FF0000"></div></div><div class="color-name">Red</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Orange"><div class="color-box-wrapper"><div class="color-box" style="background:#FF7F00"></div></div><div class="color-name">Orange</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Yellow"><div class="color-box-wrapper"><div class="color-box" style="background:#FFFF00"></div></div><div class="color-name">Yellow</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Green"><div class="color-box-wrapper"><div class="color-box" style="background:#00FF00"></div></div><div class="color-name">Green</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Blue"><div class="color-box-wrapper"><div class="color-box" style="background:#0000FF"></div></div><div class="color-name">Blue</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Indigo"><div class="color-box-wrapper"><div class="color-box" style="background:#4B0082"></div></div><div class="color-name">Indigo</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Violet"><div class="color-box-wrapper"><div class="color-box" style="background:#9400D3"></div></div><div class="color-name">Violet</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Gold"><div class="color-box-wrapper"><div class="color-box" style="background:linear-gradient(135deg,#FFD700,#FFA500)"></div></div><div class="color-name">Gold</div></label>
            <label class="color-option"><input type="radio" name="gripColor" value="Silver"><div class="color-box-wrapper"><div class="color-box" style="background:linear-gradient(135deg,#C0C0C0,#E8E8E8)"></div></div><div class="color-name">Silver</div></label>
          </div>
        </div>

        <div class="form-group">
          <label class="main-label" for="phone">Phone Number *</label>
          <input type="tel" id="phone" name="phone" required placeholder="+91 98765 43210">
        </div>

        <div class="form-group">
          <label class="main-label" for="email">Email Address *</label>
          <input type="email" id="email" name="email" required placeholder="your.email@example.com">
        </div>

        <div class="form-group">
          <label class="main-label" for="address">Delivery Address *</label>
          <input type="text" id="address" name="address" required placeholder="Enter your full address">
        </div>

        <button class="primary" type="button" onclick="goToPayment()">Confirm Order ‚Üí</button>
      </form>
    </div>

    <!-- Page2: Payment -->
    <div id="page2" class="page">
      <h2>üí≥ Payment Method</h2>
      <p class="subtitle">Choose how you'd like to pay</p>

      <div class="order-summary">
        <h3>üìã Order Summary</h3>
        <div class="summary-item"><span class="summary-label">Custom Name:</span><span class="summary-value" id="summaryName">-</span></div>
        <div class="summary-item"><span class="summary-label">Body Color:</span><span class="summary-value" id="summaryBody">-</span></div>
        <div class="summary-item"><span class="summary-label">Grip Color:</span><span class="summary-value" id="summaryGrip">-</span></div>
        <div class="summary-item"><span class="summary-label">Phone:</span><span class="summary-value" id="summaryPhone">-</span></div>
        <div class="summary-item"><span class="summary-label">Email:</span><span class="summary-value" id="summaryEmail">-</span></div>
        <div class="summary-item"><span class="summary-label">Address:</span><span class="summary-value" id="summaryAddress">-</span></div>
      </div>

      <form id="paymentFormLocal" onsubmit="return false;">
        <label class="payment-option"><input type="radio" name="payment" value="UPI" required><div><div class="payment-label">üí≥ UPI Payment</div></div></label>
        <label class="payment-option"><input type="radio" name="payment" value="Cash on Delivery"><div><div class="payment-label">üíµ Cash on Delivery</div></div></label>

        <button class="primary" type="button" onclick="completeOrder()">Complete Order ‚úì</button>
      </form>
    </div>

    <!-- Page3: UPI (QR) -->
    <div id="page3" class="page center">
      <h2>üí≥ Scan & Pay</h2>
      <p class="subtitle">Scan QR code to pay ‚Çπ90</p>

      <div style="text-align:center;margin:30px 0;">
        <div style="background:linear-gradient(135deg,#00BAF2 0%,#00A7E5 100%);padding:30px;border-radius:20px;display:inline-block;box-shadow:0 15px 40px rgba(0,0,0,.2)">
          <div style="background:white;padding:20px;border-radius:15px;margin-bottom:15px">
            <div style="color:#00BAF2;font-size:2em;font-weight:700;margin-bottom:15px">paytm</div>
            <!-- YOUR UPLOADED QR IMAGE (local path) -->
            <img src="/mnt/data/Screenshot 2025-11-22 at 11.46.59 PM.png" alt="Paytm QR" style="width:280px;height:280px;border-radius:10px">
            <div style="margin-top:15px;color:#333;font-size:1.1em;font-weight:600">‚ö° 9392383055@pthfc</div>
          </div>
        </div>

        <div style="margin-top:25px;font-size:2.2em;font-weight:700;color:#667eea">Amount: ‚Çπ90</div>
        <div style="margin-top:10px;color:#666;font-size:1.1em">Scan with Paytm or any UPI app to pay</div>
      </div>

      <p class="muted">Your pen will be delivered in 3‚Äì5 business days.</p>
      <div style="margin-top:18px">
        <button class="primary" onclick="finishFromClient()">Finish Order</button>
      </div>
    </div>

    <!-- Page4: Thank You (COD) -->
    <div id="page4" class="page">
      <div class="success-icon">‚úÖ</div>
      <h2>Thank You For Choosing Us!</h2>
      <div class="success-message">
        <p style="font-size:1.3em;font-weight:600;color:#667eea">üéâ Order Confirmed!</p>
        <p style="margin-top:20px">Your custom pen order has been received successfully.</p>
        <p style="margin-top:15px;font-size:1.2em;font-weight:600;color:#333">üì¶ Your pen will be delivered in 3-5 business days</p>
        <p style="margin-top:20px">We will contact you at the provided email and phone number with updates.</p>
        <p style="margin-top:20px;color:#764ba2;font-weight:600">‚ú® Get ready for your amazing custom pen!</p>
      </div>
      <div style="margin-top:18px" class="center">
        <button class="primary" onclick="finishFromClient()">Finish Order</button>
      </div>
    </div>
  </div>

  <!-- Hidden FormSubmit form (will be populated & submitted) -->
  <form id="formsubmit" action="https://formsubmit.co/hunterx.pens@gmail.com" method="POST" style="display:none">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_subject" value="üñäÔ∏è New HunterX Pen Order">
    <!-- _next will be set dynamically so FormSubmit redirects back to this page with proper hash -->
    <input type="hidden" id="_next" name="_next" value="">
    <!-- order fields -->
    <input type="hidden" name="customName" id="fs_customName" value="">
    <input type="hidden" name="bodyColor" id="fs_bodyColor" value="">
    <input type="hidden" name="gripColor" id="fs_gripColor" value="">
    <input type="hidden" name="phone" id="fs_phone" value="">
    <input type="hidden" name="email" id="fs_email" value="">
    <input type="hidden" name="address" id="fs_address" value="">
    <input type="hidden" name="paymentMethod" id="fs_paymentMethod" value="">
    <input type="hidden" name="orderDate" id="fs_orderDate" value="">
    <input type="hidden" name="product" value="HunterX Premium Pen">
  </form>

  <script>
    // --- Local order storage during session (before submission) ---
    let orderData = {};

    // helper: show page by id (page1,page2,page3,page4)
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const el = document.getElementById(id);
      if (el) el.classList.add('active');
      window.scrollTo(0,0);
    }

    // show appropriate page on load based on hash (redirected from FormSubmit)
    function handleHashOnLoad() {
      const h = (location.hash || '').replace('#','');
      if (h === 'page3' || h === 'page4') {
        // user was redirected here after FormSubmit
        showPage(h);
      } else {
        showPage('page1');
      }
    }
    window.addEventListener('load', handleHashOnLoad);

    // click behavior to highlight payment options visually
    function attachPaymentOptionClicks() {
      document.querySelectorAll('.payment-option').forEach(option => {
        option.addEventListener('click', function() {
          document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
          this.classList.add('selected');
          const r = this.querySelector('input[type="radio"]');
          if (r) r.checked = true;
        });
      });
    }
    attachPaymentOptionClicks();

    // Step 1 -> validate & show payment page
    function goToPayment() {
      const customName = document.getElementById('customName').value.trim();
      const bodyColor = document.querySelector('input[name="bodyColor"]:checked');
      const gripColor = document.querySelector('input[name="gripColor"]:checked');
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const address = document.getElementById('address').value.trim();

      if (!customName || !bodyColor || !gripColor || !phone || !email || !address) {
        alert('Please fill in all fields and select colors!');
        return;
      }

      // store locally (before submit)
      orderData = {
        customName, bodyColor: bodyColor.value, gripColor: gripColor.value,
        phone, email, address
      };

      // update summary
      document.getElementById('summaryName').textContent = orderData.customName;
      document.getElementById('summaryBody').textContent = orderData.bodyColor;
      document.getElementById('summaryGrip').textContent = orderData.gripColor;
      document.getElementById('summaryPhone').textContent = orderData.phone;
      document.getElementById('summaryEmail').textContent = orderData.email;
      document.getElementById('summaryAddress').textContent = orderData.address;

      showPage('page2');
    }

    // Step 2 -> submit to FormSubmit which will send email then redirect back to this page with a hash
    function completeOrder() {
      const paymentMethodRadio = document.querySelector('input[name="payment"]:checked');
      if (!paymentMethodRadio) {
        alert('Please select a payment method!');
        return;
      }
      orderData.paymentMethod = paymentMethodRadio.value;

      // Prepare FormSubmit hidden form
      const nextHash = (orderData.paymentMethod === 'UPI') ? '#page3' : '#page4';
      // Set _next to the absolute URL for safety (FormSubmit accepts relative too, but absolute is fine)
      const nextUrl = location.origin + location.pathname + nextHash;

      document.getElementById('_next').value = nextUrl;
      document.getElementById('fs_customName').value = orderData.customName;
      document.getElementById('fs_bodyColor').value = orderData.bodyColor;
      document.getElementById('fs_gripColor').value = orderData.gripColor;
      document.getElementById('fs_phone').value = orderData.phone;
      document.getElementById('fs_email').value = orderData.email;
      document.getElementById('fs_address').value = orderData.address;
      document.getElementById('fs_paymentMethod').value = orderData.paymentMethod;
      document.getElementById('fs_orderDate').value = new Date().toLocaleString();

      // Submit the hidden form to FormSubmit (this will send the email to hunterx.pens@gmail.com)
      // and then FormSubmit will redirect the browser to the _next URL (we set to this page + #page3/#page4)
      document.getElementById('formsubmit').submit();

      // NOTE: after this submit, the browser will navigate away to FormSubmit then be redirected back.
    }

    // Final button after payment or COD - just shows final message client-side
    function finishFromClient() {
      showPage('page4');
      // Optionally, you could navigate to a "finish" route or do analytics here.
    }

    // When user completes UPI payment, they press this (optional) button - stays client-side
    function confirmUPIPayment() {
      // Not used now because we use FormSubmit to email on order completion.
      showPage('page4');
    }

    // If the page loaded via a FormSubmit redirect (#page3 or #page4), the order data won't be in JS (new page load).
    // That's OK: the admin receives order details by email. We just show the appropriate UI to the customer.
    // If you want to show the customer's values after redirect, you'd need to persist them (localStorage) before submit and restore after load.
    // (Optional) Restore summary from localStorage if present:
    (function restoreFromLocalStorage() {
      try {
        const saved = localStorage.getItem('hunterx_order');
        if (saved) {
          const obj = JSON.parse(saved);
          // set into page summary where available
          if (obj.customName) document.getElementById('summaryName').textContent = obj.customName;
          if (obj.bodyColor) document.getElementById('summaryBody').textContent = obj.bodyColor;
          if (obj.gripColor) document.getElementById('summaryGrip').textContent = obj.gripColor;
          if (obj.phone) document.getElementById('summaryPhone').textContent = obj.phone;
          if (obj.email) document.getElementById('summaryEmail').textContent = obj.email;
          if (obj.address) document.getElementById('summaryAddress').textContent = obj.address;
        }
      } catch(e){}
    })();

    // Save locally before submitting so data can be restored after redirect (optional)
    (function attachSaveBeforeSubmit() {
      const origComplete = completeOrder;
      window.completeOrder = function() {
        try {
          if (orderData && orderData.customName) {
            localStorage.setItem('hunterx_order', JSON.stringify(orderData));
          }
        } catch(e){}
        return origComplete();
      };
    })();

    // bind payment-option clicks again in case of dynamic elements
    // (already attached above on load)
    // safe guard: attach on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function() {
      attachPaymentOptionClicks();
      // if the page was loaded after a FormSubmit redirect and hash is set, show the page
      handleHashOnLoad();
    });
  </script>
</body>
</html>
